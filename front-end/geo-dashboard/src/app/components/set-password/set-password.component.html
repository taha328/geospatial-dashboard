<div class="set-password-wrapper">
  <!-- Background Image -->
  <div class="background-image"></div>

  <!-- Overlay -->
  <div class="overlay"></div>

  <!-- Set Password Container -->
  <div class="set-password-container">
    <div class="set-password-card">
      <!-- Header Section -->
      <div class="set-password-header">
        <div class="logo-section">
          <div class="logo-icon">🔐</div>
          <div class="title-section">
            <h1 class="main-title">Geo Dashboard</h1>
            <h2 class="subtitle">Configuration du mot de passe</h2>
          </div>
        </div>
      </div>

      <!-- Content Section -->
      <div class="set-password-content">
        <div class="form-title">
          <h2>Définir votre mot de passe</h2>
          <p class="form-description">
            Bienvenue ! Vous avez été invité à rejoindre GeoDashboard.<br>
            Veuillez définir votre mot de passe ci-dessous.
          </p>
        </div>

        <!-- Set Password Form -->
        <form
          (ngSubmit)="submitSetPassword()"
          class="auth-form"
          novalidate
        >
          <div class="form-group">
            <label for="email" class="form-label">
              <span class="label-icon">📧</span>
              Adresse email
            </label>
            <input
              id="email"
              type="email"
              [(ngModel)]="email"
              name="email"
              placeholder="votre.email@exemple.com"
              required
              readonly
              class="form-input readonly-input"
            />
            <p class="input-help">Cette adresse email ne peut pas être modifiée</p>
          </div>

          <div class="form-group">
            <label for="password" class="form-label">
              <span class="label-icon">🔐</span>
              Nouveau mot de passe
            </label>
            <input
              id="password"
              type="password"
              [(ngModel)]="password"
              name="password"
              placeholder="Minimum 8 caractères"
              required
              minlength="8"
              autocomplete="new-password"
              class="form-input"
              [class.error]="error && password.length < 8"
            />
            <p class="input-help">Le mot de passe doit contenir au moins 8 caractères</p>
          </div>

          <div class="form-group">
            <label for="confirmPassword" class="form-label">
              <span class="label-icon">🔒</span>
              Confirmer le mot de passe
            </label>
            <input
              id="confirmPassword"
              type="password"
              [(ngModel)]="confirmPassword"
              name="confirmPassword"
              placeholder="Confirmer votre mot de passe"
              required
              autocomplete="new-password"
              class="form-input"
              [class.error]="error && password !== confirmPassword"
            />
            <p class="input-help">Les mots de passe doivent correspondre</p>
          </div>

          <button
            type="submit"
            class="primary-button"
            [disabled]="isLoading || !isFormValid"
          >
            <span class="button-icon">{{ isLoading ? '⏳' : '✅' }}</span>
            <span>{{ isLoading ? 'Configuration...' : 'Définir le mot de passe' }}</span>
          </button>
        </form>

        <!-- Messages -->
        <div class="messages-container">
          <div *ngIf="error" class="message error-message" role="alert">
            <span class="message-icon">⚠️</span>
            <span class="message-text">{{ error }}</span>
          </div>

          <div *ngIf="successMessage" class="message success-message" role="status">
            <span class="message-icon">✅</span>
            <span class="message-text">{{ successMessage }}</span>
          </div>
        </div>

        <!-- Token Info (for debugging) -->
        <div *ngIf="token" class="token-info">
          <p class="token-label">Code d'invitation:</p>
          <code class="token-code">{{ token }}</code>
        </div>
      </div>
    </div>
  </div>
</div>
