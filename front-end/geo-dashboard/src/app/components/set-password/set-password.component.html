<div class="set-password-container">
  <div class="set-password-card">
    <!-- Header -->
    <div class="header">
      <div class="logo">
        <span class="logo-icon">ğŸ”</span>
      </div>
      <h1 class="title">{{ isResetFlow ? 'RÃ©initialiser votre mot de passe' : 'DÃ©finir votre mot de passe' }}</h1>
      <p class="subtitle">{{ isResetFlow ? 'CrÃ©ez un nouveau mot de passe pour votre compte' : 'Bienvenue ! CrÃ©ez votre mot de passe pour accÃ©der Ã  GeoDashboard' }}</p>
    </div>

    <!-- Success Message -->
    <div *ngIf="success" class="success-message">
      <div class="success-icon">âœ…</div>
      <h3>{{ isResetFlow ? 'Mot de passe rÃ©initialisÃ© avec succÃ¨s !' : 'Mot de passe dÃ©fini avec succÃ¨s !' }}</h3>
      <p>Vous allez Ãªtre redirigÃ© vers la page de connexion...</p>
    </div>

    <!-- Error Message -->
    <div *ngIf="error && !success" class="error-message">
      <div class="error-icon">âš ï¸</div>
      <p>{{ error }}</p>
    </div>

    <!-- Set Password Form -->
    <form *ngIf="!success" (ngSubmit)="onSubmit()" class="set-password-form">
      <!-- Email Field (Read-only) -->
      <div class="form-group">
        <label for="email" class="form-label">
          <span class="label-icon">ğŸ“§</span>
          Adresse email
        </label>
        <input
          id="email"
          type="email"
          [value]="email"
          readonly
          class="form-input readonly"
        />
        <small class="form-help">{{ isResetFlow ? 'Cette adresse email est associÃ©e Ã  votre compte' : 'Cette adresse email a Ã©tÃ© utilisÃ©e pour votre invitation' }}</small>
      </div>

      <!-- Password Field -->
      <div class="form-group">
        <label for="password" class="form-label">
          <span class="label-icon">ğŸ”’</span>
          Nouveau mot de passe
        </label>
        <input
          id="password"
          type="password"
          [(ngModel)]="password"
          name="password"
          placeholder="Votre mot de passe"
          required
          minlength="8"
          class="form-input"
          [class.error]="password && password.length < 8"
        />
        <small class="form-help">Minimum 8 caractÃ¨res</small>
      </div>

      <!-- Confirm Password Field -->
      <div class="form-group">
        <label for="confirmPassword" class="form-label">
          <span class="label-icon">ğŸ”</span>
          Confirmer le mot de passe
        </label>
        <input
          id="confirmPassword"
          type="password"
          [(ngModel)]="confirmPassword"
          name="confirmPassword"
          placeholder="Confirmer votre mot de passe"
          required
          class="form-input"
          [class.error]="confirmPassword && password !== confirmPassword"
        />
        <small class="form-help" [class.error-text]="confirmPassword && password !== confirmPassword">
          {{ confirmPassword && password !== confirmPassword ? 'Les mots de passe ne correspondent pas' : 'Retapez votre mot de passe' }}
        </small>
      </div>

      <!-- Submit Button -->
      <button
        type="submit"
        class="submit-button"
        [disabled]="loading || !password || !confirmPassword || password !== confirmPassword || password.length < 8"
      >
        <span class="button-icon" *ngIf="loading">â³</span>
        <span class="button-icon" *ngIf="!loading">âœ…</span>
        <span>{{ loading ? (isResetFlow ? 'RÃ©initialisation...' : 'CrÃ©ation...') : (isResetFlow ? 'RÃ©initialiser mon mot de passe' : 'CrÃ©er mon mot de passe') }}</span>
      </button>
    </form>

    <!-- Footer -->
    <div class="footer" *ngIf="!success">
      <p>
        <a href="/login" class="login-link">â† Retour Ã  la connexion</a>
      </p>
      <p class="help-text">
        {{ isResetFlow ? 'Ce lien de rÃ©initialisation expire dans 1 heure.' : 'Ce lien d\'invitation expire dans 24 heures.' }}
      </p>
    </div>
  </div>
</div>