<!-- Show navbar and content only when logged in -->
<ng-container *ngIf="isLoggedIn">
  <!-- ZardUI Navbar -->
  <z-navbar class="mb-0">
    <div brand>
      <!-- Empty brand section -->
    </div>

    <div nav-links>
      <a routerLink="/map" routerLinkActive="active" class="text-gray-700 hover:text-blue-600 px-4 py-3 rounded-md text-base font-semibold transition-colors">
        <span class="mr-3 text-lg">ğŸ—ºï¸</span>
        Cartographie
      </a>
      <a routerLink="/assets" routerLinkActive="active" class="text-gray-700 hover:text-blue-600 px-4 py-3 rounded-md text-base font-semibold transition-colors">
        <span class="mr-3 text-lg">ğŸ—ï¸</span>
        Gestion Actifs
      </a>
      <a *ngIf="isAdmin" routerLink="/users" routerLinkActive="active" class="text-gray-700 hover:text-blue-600 px-4 py-3 rounded-md text-base font-semibold transition-colors">
        <span class="mr-3 text-lg">ğŸ‘¥</span>
        Utilisateurs
      </a>
    </div>

    <div actions>
      <z-button zType="ghost" zSize="lg" (click)="toggleNotificationPanel()" class="relative px-3 py-2">
        <span class="text-lg">ğŸ””</span>
        <span *ngIf="unreadNotificationCount > 0" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
          {{ unreadNotificationCount }}
        </span>
      </z-button>
      <z-button zType="outline" zSize="lg" (click)="logout()" class="px-4 py-2">
        <span class="mr-2 text-lg">ğŸ”“</span>
        <span class="text-base font-medium">Logout</span>
      </z-button>
    </div>

    <div mobile-nav-links>
      <a routerLink="/map" routerLinkActive="active" class="block px-4 py-3 rounded-md text-lg font-semibold text-gray-700 hover:text-blue-600 transition-colors" (click)="closeMobileMenu()">
        <span class="mr-4 text-xl">ğŸ—ºï¸</span>
        Cartographie Interactive
      </a>
      <a routerLink="/assets" routerLinkActive="active" class="block px-4 py-3 rounded-md text-lg font-semibold text-gray-700 hover:text-blue-600 transition-colors" (click)="closeMobileMenu()">
        <span class="mr-4 text-xl">ğŸ—ï¸</span>
        Gestion Actifs
      </a>
      <a *ngIf="isAdmin" routerLink="/users" routerLinkActive="active" class="block px-4 py-3 rounded-md text-lg font-semibold text-gray-700 hover:text-blue-600 transition-colors" (click)="closeMobileMenu()">
        <span class="mr-4 text-xl">ğŸ‘¥</span>
        Gestion Utilisateurs
      </a>
    </div>
  </z-navbar>

  <!-- Notification Panel -->
  <app-notification-panel
    *ngIf="notificationPanelOpen"
    [notifications]="notifications"
    (close)="closeNotificationPanel()"
    (notificationClicked)="onNotificationClicked($event)"
    (markAllAsRead)="markAllNotificationsAsRead()">
  </app-notification-panel>
</ng-container>

<!-- Always show router-outlet for all routes -->
<main [class]="isLoggedIn ? 'app-content' : 'login-content'">
  <router-outlet></router-outlet>
</main>
