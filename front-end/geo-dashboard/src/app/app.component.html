<!-- Show navbar and content only when logged in -->
<ng-container *ngIf="isLoggedIn">
  <!-- ZardUI Navbar -->
  <z-navbar class="mb-0">
    <div brand>
      <div class="flex items-center gap-3">
        <div class="text-2xl">ğŸ—ºï¸</div>
        <div>
          <h1 class="text-lg font-bold text-gray-900">{{ title | titlecase }}</h1>
          <span class="text-xs text-gray-600 uppercase tracking-wide">SystÃ¨me GÃ©ospatial</span>
        </div>
      </div>
    </div>

    <div nav-links>
      <a routerLink="/map" routerLinkActive="active" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">
        <span class="mr-2">ğŸ—ºï¸</span>
        Cartographie
      </a>
      <a routerLink="/assets" routerLinkActive="active" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">
        <span class="mr-2">ğŸ—ï¸</span>
        Gestion Actifs
      </a>
      <a *ngIf="isAdmin" routerLink="/users" routerLinkActive="active" class="text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors">
        <span class="mr-2">ğŸ‘¥</span>
        Utilisateurs
      </a>
    </div>

    <div actions>
      <z-button zType="ghost" zSize="sm" (click)="toggleNotificationPanel()" class="relative">
        <span>ğŸ””</span>
        <span *ngIf="unreadNotificationCount > 0" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">
          {{ unreadNotificationCount }}
        </span>
      </z-button>
      <z-button zType="outline" zSize="sm" (click)="logout()">
        <span class="mr-2">ğŸ”“</span>
        Logout
      </z-button>
    </div>

    <div mobile-nav-links>
      <a routerLink="/map" routerLinkActive="active" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 transition-colors" (click)="closeMobileMenu()">
        <span class="mr-3">ğŸ—ºï¸</span>
        Cartographie Interactive
      </a>
      <a routerLink="/assets" routerLinkActive="active" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 transition-colors" (click)="closeMobileMenu()">
        <span class="mr-3">ğŸ—ï¸</span>
        Gestion Actifs
      </a>
      <a *ngIf="isAdmin" routerLink="/users" routerLinkActive="active" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-blue-600 transition-colors" (click)="closeMobileMenu()">
        <span class="mr-3">ğŸ‘¥</span>
        Gestion Utilisateurs
      </a>
    </div>
  </z-navbar>

  <!-- Notification Panel -->
  <app-notification-panel
    *ngIf="notificationPanelOpen"
    [notifications]="notifications"
    (close)="closeNotificationPanel()"
    (notificationClicked)="onNotificationClicked($event)"
    (markAllAsRead)="markAllNotificationsAsRead()">
  </app-notification-panel>
</ng-container>

<!-- Always show router-outlet for all routes -->
<main class="app-content">
  <router-outlet></router-outlet>
</main>
